<html><head><meta charset="UTF-8"><link rel="import" href="../iron-form/iron-form.html">

</head><body><dom-module id="callback-form">
    <template>
        <style>:host{display:block;}</style>
        <form is="iron-form" action$="[[action]]" method="post" id="callbackForm">
            <content></content>
        </form>
    </template>
    <script>(function(){Polymer({is:"callback-form",properties:{action:String,errorMessage:{type:String,value:"Произошла ошибка. Попробуйте отправить вашу заявку позднее."},submitBtn:Object,display:Object},ready:function(){return this.submitBtn=this.querySelector('[type="submit"]'),null==this.submitBtn&&(this.submitBtn=this.querySelector('button:not([type="button"])')),null==this.submitBtn?console.error("Can't find submit button"):this.display=this.submitBtn.parentNode,this.listen(this.$.callbackForm,"iron-form-submit","onSubmit"),this.listen(this.$.callbackForm,"iron-form-error","onError"),this.listen(this.$.callbackForm,"iron-form-response","onResponse")},onSubmit:function(){var t,s,e,i;for(this.submitBtn.textContent=this.submitBtn.getAttribute("data-loading-text"),i=this.querySelectorAll("[name]"),t=0,e=i.length;t<e;t++)s=i[t],s.disabled=!0;return this.submitBtn.disabled=!0},onError:function(){return this.prepareForMessage(),this.display.textContent=this.errorMessage,this.toggleClass("alert-danger",!0,this.display)},onResponse:function(){return this.prepareForMessage(),this.display.textContent="Заявка успешно отправлена!",this.toggleClass("alert-success",!0,this.display)},prepareForMessage:function(){return this.display.removeChild(this.submitBtn),this.toggleClass("alert",!0,this.display)}})}).call(this);</script>
</dom-module></body></html>